(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(13),u=n.n(c),o=(n(18),n(2)),l=n(3),i=n.n(l),s="/api/persons",m={getAll:function(){return i.a.get(s).then((function(e){return e.data}))},create:function(e,t){return i.a.post(s,{name:e,number:t}).then((function(e){return e.data}))},delete:function(e){return i.a.delete("".concat(s,"/").concat(e))},patch:function(e,t){return i.a.patch("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},isNotExistingError:function(e){var t;return 404===(null===(t=e.response)||void 0===t?void 0:t.status)}},f=function(e,t){var n,r,a,c;if(t&&m.isNotExistingError(e))return"'".concat(t.name,"' doesn't exist.");var u=null!==(n=null!==(r=null===(a=e.response)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.error)&&void 0!==r?r:e.message)&&void 0!==n?n:e.toString();return"Unexpected error: ".concat(u)},d=function(e){var t=e.filter,n=e.setFilter;return a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))},E=function(e){var t=e.persons,n=e.refreshPersons,c=e.notify,u=Object(r.useState)(""),l=Object(o.a)(u,2),i=l[0],s=l[1],d=Object(r.useState)(""),E=Object(o.a)(d,2),h=E[0],v=E[1],b=a.a.createRef();return a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),b.current.focus();var r=function(){s(""),v(""),n()},a=i.trim();if(""!==a){var u=t.find((function(e){return e.name===a}));if(u){if(!window.confirm("".concat(u.name," is already added to ")+"phonebook, replace old number with a new one?"))return;m.patch(u.id,{number:h.trim()}).then((function(){return c("Number updated for '".concat(u.name,"'."))})).catch((function(e){return c(f(e,u),!0)})).then(r)}else m.create(a,h.trim()).then((function(){return c("Added '".concat(a,"'."))})).catch((function(e){return c(f(e),!0)})).then(r)}}},a.a.createElement("div",null,"name: ",a.a.createElement("input",{ref:b,autoFocus:!0,value:i,onChange:function(e){return s(e.target.value)}})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:h,onChange:function(e){return v(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},h=function(e){var t=e.persons,n=e.filter,r=e.refreshPersons,c=e.notify,u=t.filter((function(e){return e.name.toLowerCase().includes(n.trim().toLowerCase())}));return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Name"),a.a.createElement("td",null,"Number"),a.a.createElement("td",null,"Delete"))),a.a.createElement("tbody",null,u.map((function(e){return a.a.createElement("tr",{key:e.id},a.a.createElement("td",null,e.name),a.a.createElement("td",null,e.number),a.a.createElement("td",null,a.a.createElement("button",{onClick:function(){return t=e,void(window.confirm("Delete ".concat(t.name,"?"))&&m.delete(t.id).then((function(){return c("'".concat(t.name,"' deleted."))})).catch((function(e){return c(f(e,t),!0)})).then(r));var t}},"do it")))}))))},v=function(e){var t=e.msg,n=e.isError;if(!t)return null;var r={color:n?"red":"green"};return a.a.createElement("div",{className:"notification",style:r},t)},b=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),l=Object(o.a)(u,2),i=l[0],s=l[1],f=Object(r.useState)(null),b=Object(o.a)(f,2),p=b[0],g=b[1],j=Object(r.useState)(!1),O=Object(o.a)(j,2),w=O[0],y=O[1],S=Object(r.useState)(null),k=Object(o.a)(S,2),N=k[0],C=k[1],P=function(){m.getAll().then(c)};Object(r.useEffect)(P,[]);var x=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];g(e),y(t),console.log(e),clearTimeout(N),C(setTimeout((function(){g(null)}),5e3))};return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(v,{msg:p,isError:w}),a.a.createElement(d,{filter:i,setFilter:s}),a.a.createElement("h3",null,"add a new"),a.a.createElement(E,{persons:n,refreshPersons:P,notify:x}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(h,{persons:n,filter:i,refreshPersons:P,notify:x}))};u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(b,null)),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.bae54cf4.chunk.js.map