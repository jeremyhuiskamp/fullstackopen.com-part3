{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseURL","exports","getAll","axios","get","then","rsp","data","create","name","number","post","delete","id","patch","changes","isNotExistingError","e","response","status","errMsg","person","personService","reason","error","message","toString","Filter","filter","setFilter","value","onChange","target","PersonForm","persons","refreshPersons","notify","useState","newName","setNewName","newNumber","setNewNumber","inputRef","React","createRef","onSubmit","event","preventDefault","current","focus","reset","trimmed","trim","existing","find","p","window","confirm","catch","ref","autoFocus","type","Persons","filteredPersons","toLowerCase","includes","map","key","onClick","Notification","msg","isError","style","color","className","App","setPersons","notification","setNotification","notificationIsError","setNotificationIsError","notificationTimeout","setNotificationTimeout","useEffect","console","log","clearTimeout","setTimeout","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bae54cf4.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseURL = '/api/persons';\n\nconst getAll = () => axios.get(baseURL)\n    .then(rsp => rsp.data);\n\nconst create = (name, number) =>\n    axios.post(baseURL, {\n        name, number\n    }).then(rsp => rsp.data);\n\nconst delete_ = id =>\n    axios.delete(`${baseURL}/${id}`);\n\nconst isNotExistingError = e => e.response?.status === 404;\n\nconst patch = (id, changes) => axios\n    .patch(`${baseURL}/${id}`, changes)\n    .then(rsp => rsp.data);\n\nconst exports = {\n    getAll, create, delete: delete_, patch, isNotExistingError,\n};\nexport default exports;","import React, { useEffect, useState } from 'react';\nimport personService from './services/persons';\n\nconst errMsg = (e, person) => {\n    if (person && personService.isNotExistingError(e)) {\n        return `'${person.name}' doesn't exist.`;\n    }\n\n    const reason = e.response?.data?.error ?? e.message ?? e.toString();\n    return `Unexpected error: ${reason}`\n};\n\nconst Filter = ({ filter, setFilter }) =>\n    <div>\n        filter shown with <input value={filter} onChange={(e) => setFilter(e.target.value)} />\n    </div>\n\nconst PersonForm = ({ persons, refreshPersons, notify }) => {\n    const [newName, setNewName] = useState('');\n    const [newNumber, setNewNumber] = useState('');\n    const inputRef = React.createRef();\n\n    const submit = (event) => {\n        event.preventDefault();\n        inputRef.current.focus();\n\n        const reset = () => {\n            setNewName('');\n            setNewNumber('');\n            refreshPersons();\n        }\n\n        const trimmed = newName.trim();\n        if (trimmed === '') {\n            return;\n        }\n        const existing = persons.find(p => p.name === trimmed);\n        if (existing) {\n            if (!window.confirm(`${existing.name} is already added to ` +\n                `phonebook, replace old number with a new one?`)) {\n                return;\n            }\n            personService\n                .patch(existing.id, { number: newNumber.trim() })\n                .then(() => notify(`Number updated for '${existing.name}'.`))\n                .catch(e => notify(errMsg(e, existing), true))\n                .then(reset);\n            return;\n        }\n\n        personService\n            .create(trimmed, newNumber.trim())\n            .then(() => notify(`Added '${trimmed}'.`))\n            .catch(e => notify(errMsg(e), true))\n            .then(reset);\n    };\n\n    return (\n        <form onSubmit={submit}>\n            <div>\n                name: <input ref={inputRef} autoFocus={true} value={newName} onChange={(e) => setNewName(e.target.value)} />\n            </div>\n            <div>\n                number: <input value={newNumber} onChange={(e) => setNewNumber(e.target.value)} />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nconst Persons = ({ persons, filter, refreshPersons, notify }) => {\n    const filteredPersons = persons.filter(p =>\n        p.name.toLowerCase().includes(filter.trim().toLowerCase())\n    )\n    const drop = person => {\n        if (!window.confirm(`Delete ${person.name}?`)) {\n            return;\n        }\n        personService\n            .delete(person.id)\n            .then(() => notify(`'${person.name}' deleted.`))\n            .catch(e => notify(errMsg(e, person), true))\n            .then(refreshPersons);\n    };\n    return (\n        <table>\n            <thead>\n                <tr>\n                    <td>Name</td>\n                    <td>Number</td>\n                    <td>Delete</td>\n                </tr>\n            </thead>\n            <tbody>\n                {filteredPersons.map(p =>\n                    <tr key={p.id}>\n                        <td>{p.name}</td>\n                        <td>{p.number}</td>\n                        <td>\n                            <button\n                                onClick={() => drop(p)}>\n                                do it\n                            </button>\n                        </td>\n                    </tr>\n                )}\n            </tbody>\n        </table>\n    )\n}\n\nconst Notification = ({ msg, isError }) => {\n    if (!msg) {\n        return null;\n    }\n\n    const style = {\n        color: isError ? \"red\" : \"green\",\n    };\n    return <div className=\"notification\" style={style}>{msg}</div>\n};\n\nconst App = () => {\n    const [persons, setPersons] = useState([]);\n    const [filter, setFilter] = useState('');\n    const [notification, setNotification] = useState(null);\n    const [notificationIsError, setNotificationIsError] = useState(false);\n    const [notificationTimeout, setNotificationTimeout] = useState(null);\n\n    const refreshPersons = () => {\n        personService.getAll().then(setPersons);\n    };\n\n    useEffect(refreshPersons, []);\n\n    const notify = (msg, isError = false) => {\n        setNotification(msg);\n        setNotificationIsError(isError);\n        console.log(msg);\n\n        // cancel previous timeout so that we don't wipe\n        // this notification early...\n        clearTimeout(notificationTimeout);\n        setNotificationTimeout(setTimeout(() => {\n            setNotification(null);\n        }, 5000));\n    }\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification msg={notification} isError={notificationIsError} />\n\n            <Filter filter={filter} setFilter={setFilter} />\n\n            <h3>add a new</h3>\n            <PersonForm\n                persons={persons}\n                refreshPersons={refreshPersons}\n                notify={notify} />\n\n            <h3>Numbers</h3>\n            <Persons\n                persons={persons}\n                filter={filter}\n                refreshPersons={refreshPersons}\n                notify={notify} />\n        </div>\n    )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}